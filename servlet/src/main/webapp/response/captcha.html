<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>使用验证码图片</title>

        <style type="text/css">
            .wrapper { display : block ;  width : 80% ; margin : auto ; overflow: hidden ; }
            .form { border-radius: 5px ; box-shadow: 0 0 5px 4px #dedede ; }
            .form .row { margin: 5px ; overflow: hidden ;  }
            .form .row>* { float : left ; height : 50px ; width : 50% ; text-align:center ; }
            .form .row input { width : 80% ; line-height : 50px ; border:none; outline: none; }
            .form .row img { width : 80% ; height : 50px ; border:none; outline: none; }
        </style>

    </head>
    <body>

    <div class="form wrapper">
        <form action="">
            <div class="row">
               <span>
                   <input type="text" name="code" placeholder="请输入验证码">
                </span>
                <span>
                    <!-- 为 img 标签的 src 属性指定 一个 用于产生验证码图片的 servlet 程序的 url-pattern -->
                    <img src="/captcha" alt="验证码" >
                </span>
            </div>
        </form>
    </div>

    <script type="text/javascript">
        ( function(){
            // 使用选择器选择页面上的单个 img 元素
            var image = document.querySelector( ".form .row img" );
            // 如果已经选中 img 元素
            if( image ){

                // 为验证码图片提供鼠标悬停时的提示信息
                image.setAttribute( "title" , "点击刷新" );

                // 声明点击事件对应的监听器函数
                var listener = function(){
                    // 使用当前时间重新组合URL
                    var url = "/captcha/" + Date.now();
                    // 为 img 元素重新设置 src 属性的值
                    image.setAttribute( "src" , url );
                };

                // 为 image 绑定点击事件监听器
                image.addEventListener( "click" , listener , false );
            }
        } )();
    </script>


    </body>
</html>